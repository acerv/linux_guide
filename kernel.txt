
LINUX TOOLS DOCUMENTATION FILE
Andrea Cervesato <sawk.ita@gmail.com>

============
Informations
============

    * uname -r: return the version of the running kernel

================
Modules handling
================

    The installed kernel modules are located int the /lib/modules/<kernel version>/build 
    directory.

    * insmod <module file>: insert a module into the kernel
    * rmmod <module file>: remove a loaded module from the kernel
    * modinfo [-k <kernel version>] <module>: informations about installed 
      module in the given kernel version
    * lsmod: list all loaded modules on system
    * modprobe <module>: load an installed module

==============
Create modules
==============

    A great guide can be found here: 
    http://tldp.org/LDP/lkmpg/2.6/html/lkmpg.html

============================
Makefile for cross compiling
============================

    The kernel modules Makefile can be setup for cross compiling as following.

    Makefile:
        obj-m += hello.o
        SYSROOT :=
        KDIR := $(SYSROOT)/usr/src/kernel
        ARCH := x86
        CROSS_COMPILE := i586-poky-linux-

        all: build 

        build:
           make -C $(KDIR) M=$(PWD) modules

        clean:
           make -C $(KDIR) M=$(PWD) clean

======================
Signing kernel modules
======================

    A kernel module signing guide can be found here: 
    https://www.kernel.org/doc/Documentation/module-signing.txt

    Before signing kernel modules, the /usr/src/kernel directory must be configured
    with the following command:

        sudo make -C /usr/src/kernel scripts

    Then it's possible to use a Makefile rule for automatic sign, just in case
    the kernel module must be loaded manually for tests:

    Makefile sign rule:
        sign:
           env LANG=C perl $(KDIR)/scripts/sign-file sha1 \
                           $(KDIR)/signing_key.priv \
                           $(KDIR)/signing_key.x509 \
                           hello.ko

    "env LANG=C" is used to avoid perl warnings.
